<div class="page-container">

  <div class="profile-container" *ngIf="!loading && profileData">
    <h2>Profilo Utente</h2>
    <p>Username: {{ profileData.username }}</p>
    <p>Email: {{ profileData.email }}</p>
    <p>Address: {{ profileData.address }}</p>
    <p>Ruolo: {{ profileData.role }}</p>

    <div class="profile-buttons">
      <a class="btn" [routerLink]="['/home']">Vai alla Home</a>
    </div>
  </div>

  <div *ngIf="loading">Caricamento...</div>
  <div *ngIf="!loading && errorMessage" class="error">{{ errorMessage }}</div>

  <div *ngIf="roleUpper === 'SELLER' && !loading && !errorMessage">
    <div class="profile-container" *ngIf="shopData">
      <h3>Informazioni Shop</h3>
      <p>ID: {{ shopData.id }}</p>
      <p>Nome: {{ shopData.name }}</p>
      <p>Categoria: {{ shopData.shopCategory }}</p>

      <div class="profile-buttons">
        <a class="btn btn-manage" [routerLink]="['/profiles', profileId, 'shop', 'editor', shopData.id]">
          Gestione Shop
        </a>
      </div>
    </div>

    <div class="profile-container" *ngIf="!shopData">
      <h3>Il tuo Negozio</h3>
      <p>Non hai ancora creato uno shop per vendere i tuoi prodotti.</p>
      <div class="profile-buttons">
        <a class="btn btn-primary" [routerLink]="['/profiles', profileId, 'shop', 'editor']">
          Crea Shop
        </a>
      </div>
    </div>
  </div>

  <div class="orders-container" *ngIf="!loading && (shopId || roleUpper === 'CUSTOMER')">
    <h3 class="table-title" *ngIf="roleUpper === 'SELLER'">Ordini ricevuti</h3>
    <h3 class="table-title" *ngIf="roleUpper === 'CUSTOMER'">Ordini fatti</h3>

    <app-orders-table
      [orders]="orders"
      [role]="roleUpper"
      [profileId]="profileId!"
      [shopId]="shopId">
    </app-orders-table>
  </div>

  <div *ngIf="orders.length === 0 && !loading && !errorMessage && (shopId || roleUpper === 'CUSTOMER')">
    Nessun ordine trovato
  </div>

</div>