<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Profilo ID</th>
      <th>Shop ID</th>
      <th>Data Ordine</th>
      <th>Totale</th>
      <th>Stato</th>
      <th>Tracking ID</th>
      <th>Data Consegna Stimata</th>
      <th>Azioni</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let order of orders">
      <td>{{ order.id }}</td>
      <td>{{ order.customer?.id }}</td>
      <td>{{ order.shop?.id }}</td>
      <td>{{ order.orderDate | date:'dd/MM/yyyy' }}</td>
      <td>{{ order.total | currency:'EUR' }}</td>
      <td>{{ order.status }}</td>
      <td>{{ order.trackingId || 'N/A' }}</td>
      <td>
        {{ order.estimatedDeliveryDate
            ? (order.estimatedDeliveryDate | date:'dd/MM/yyyy')
            : 'N/A' }}
      </td>

      <td>
        <ng-container *ngIf="role === 'SELLER'">
          <div *ngIf="helper.canSellerShip(order)">
            <input
              type="text"
              placeholder="Tracking ID"
              [value]="order._trackingTemp || ''"
              (input)="order._trackingTemp = $any($event.target).value"
            />

            <input
              type="date"
              [value]="order._estimatedTemp || ''"
              (input)="order._estimatedTemp = $any($event.target).value"
              [min]="todayString"
            />

            <button
              (click)="shipOrder(order)"
              [disabled]="!order._trackingTemp || !order._estimatedTemp">
              Conferma spedizione
            </button>
          </div>

          <div *ngIf="helper.isExpired(order)" class="expired">
            Consegna scaduta, sollecito inviato
          </div>
        </ng-container>

        <ng-container *ngIf="role === 'CUSTOMER'">
          <button
            (click)="confirmDelivery(order)"
            [disabled]="!helper.canCustomerConfirm(order)">
            Conferma consegna
          </button>

          <div
            *ngIf="
              order.status === 'SHIPPED' &&
              order.estimatedDeliveryDate &&
              !helper.canCustomerConfirm(order)
            "
            class="info-text">
            Disponibile dal {{ order.estimatedDeliveryDate | date:'dd/MM/yyyy' }}
          </div>
        </ng-container>
      </td>
    </tr>
  </tbody>
</table>